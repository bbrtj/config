#!/usr/bin/env perl

use v5.30;
use warnings;
use autodie;

use File::Basename qw(dirname);
use lib dirname(dirname(__FILE__)) . '/lib';
use CommandHelpers dir => 'org';

my @list = map { s{^.*/(.+)\.md$}{$1}r } glob DATA_DIR . '/*.md';

CommandHelpers->handle_completion(@list, 'list');

my ($arg) = @ARGV;

if (!$arg) {
	say for @list;
}
elsif ($arg eq 'list') {
	system("list " . DATA_DIR);
}
elsif ($arg) {
	my $name = DATA_DIR . "/$arg.md";
	if (!-e $name) {
		open my $fh, '>:encoding(utf8)', $name;
		print {$fh} "Organizing items for $arg:";
	}
	system(qq{vi $name});
}

__END__

=pod

Usage: org [NAME | list]

