#!/usr/bin/env perl

use v5.30;
use warnings;
use autodie;

use constant NOTES_DIR => $ENV{HOME} . '/.envdata';
use constant NOTE_FILE => NOTES_DIR . '/note';

mkdir NOTES_DIR
	if !-e NOTES_DIR;

sub get_note
{
	open my $fh, '<', NOTE_FILE;
	return scalar <$fh>;
}

if (@ARGV) {
	my $content = join ' ', @ARGV;
	if (substr($content, 0, 1) eq '+') {
		substr $content, 0, 1, '';
		$content = get_note . $content;
	}
	open my $fh, '>', NOTE_FILE;
	print {$fh} $content;
}
else {
	print get_note;
}
